<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	
</head>

<body>



<div class="well"">
	<h1 class="text-center">I want to be a Friend</h1>

 	<h2 class="text-left">Survey Questions:</h2>
	<div class="panel panel-info">
	  	<div class="panel-heading">
	  		<h3 class="panel-title">1. I speak another language fluently.</h3>
	  	</div>
  		<div class="panel-body">
		    <form>
			    <label class="radio-inline">
			      <input type="radio" name=question1 value=1>1-Strongly Agree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question1 value=2>2-Agree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question1 value=3>3-Undecided
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question1 value=4>4-Disagree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question1 value=5>5-Strongly Disagree
			    </label>
			    </label>
		  </form>
  		</div>
	  	<div class="panel-heading">
	  		<h3 class="panel-title">2. I love my job.</h3>
	  	</div>
	  	<div class="panel-body">
		    <form>
				<label class="radio-inline">
				  	<input type="radio" name=question2 value=1>1-Strongly Agree
				</label>
				<label class="radio-inline">
				  	<input type="radio" name=question2 value=2>2-Agree
				</label>
				<label class="radio-inline">
				  	<input type="radio" name=question2 value=3>3-Undecided
				</label>
				<label class="radio-inline">
				  	<input type="radio" name=question2 value=4>4-Disagree
				</label>
				<label class="radio-inline">
				  	<input type="radio" name=question2 value=5>5-Strongly Disagree
				</label>
		  	</form>
		</div>
		<div class="panel-heading">
		 	<h3 class="panel-title">3. I like to go to sports events.</h3>
		</div>
		<div class="panel-body">
			<form>
			    <label class="radio-inline">
			      <input type="radio" name=question3 value=1>1-Strongly Agree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question3 value=2>2-Agree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question3 value=3>3-Undecided
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question3 value=4>4-Disagree
			    </label>
			    <label class="radio-inline">
			      <input type="radio" name=question3 value=5>5-Strongly Disagree
			    </label>
		  	</form>
	  	</div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">4. I enjoy watching football games.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question4 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question4 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question4 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question4 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question4 value=5>5-Strongly Disagree
				    </label>
				    </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">5. I go to the theater once a month.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question5 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question5 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question5 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question5 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question5 value=5>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">6. A gym membership is useless.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=6>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=6>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=6>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">7. I take a brisk walk/jog everyday.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question7 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question7 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question7 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question7 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question7 value=5>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">8. Everything I have .</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question8 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question8 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question8 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question8 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question8 value=5>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">9. I don't like going out to eat on weekends.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question9 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question9 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question9 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question9 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question9 value=5>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
		  <div class="panel-heading">
		  	<h3 class="panel-title">10. I prefer caribbean beach vacations.</h3>
		  </div>
		  <div class="panel-body">
			    <form>
				    <label class="radio-inline">
				      <input type="radio" name=question10 value=1>1-Strongly Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question10 value=2>2-Agree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question10 value=3>3-Undecided
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question10 value=4>4-Disagree
				    </label>
				    <label class="radio-inline">
				      <input type="radio" name=question10 value=5>5-Strongly Disagree
				    </label>
			  </form>
		  </div>
	</div>
</div>

<form class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input type="text" class="form-control" placeholder="Name" id="name">
  </div>
  <button type="submit" class="btn btn-primary submit">Submit</button>
</form>



</div>







<script type="text/javascript">

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file


    $(".submit").on("click", function(event) {
    	console.log(event);
    console.log('submit event');
      event.preventDefault();

      // Here we grab the form elements
      var newFriend = {
        Name: $("#name").val().trim(),
      };

      console.log(newFriend);

      // This line is the magic. It"s very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
 
      $.post("/api/friend", newFriend,
        function(data) {
console.log(data);
console.log(newFriend);
           
          // If a table is available... tell user they are booked.
          if (data) {
          	runFriendQuery();
            alert("Yay! You are officially on the Friend Finder DB");

          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Sorry you are on the wait list");
          }

          // Clear the form when submitting
          runFriendQuery();
          $("#name").val("");
        });

    });


    // In this code, jQuery is used to "download" the data from our server
    // We then dynamically display this content in our table. This is very similar to the group projects you just completed.
    // It's also very similar to the NYT search application. In fact, I copied a ton of code from there.

    function runFriendQuery() {

console.log('runFriendQuery');
      // Here we get the location of the root page.
      // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
      var currentURL = window.location.origin;

      // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
      $.ajax({ url: currentURL + "/api/friend", method: "GET" })
      .done(function(friend) {

        // Here we are logging the URL so we have access to it for troubleshooting
        console.log("------------------------------------");
        console.log("URL: " + currentURL + "/api/friend");
        console.log("------------------------------------");

        // Here we then log the NYTData to console, where it will show up as an object.
        console.log('friend-----------', friend);
        console.log("------------------------------------");

        // Loop through and display each of the customers
        for (var i = 0; i < friend.length; i++) {

          // Create the HTML Well (Section) and Add the table content for each reserved table
          var friendSection = $("<div>");
          friendSection.addClass("well");
          friendSection.attr("id", "friendWell" + i + 1);
          $("#friendWell").append(friendSection);

          
          // Then display the remaining fields in the HTML (Section Name, Date, URL)
          $("#friendWell" + i + 1).append("<h2><span class='label label-primary'>" + name + "</span> | " + friend[i].name + "</h2>");
        }
      });
    }

</script>



</body>
</html>